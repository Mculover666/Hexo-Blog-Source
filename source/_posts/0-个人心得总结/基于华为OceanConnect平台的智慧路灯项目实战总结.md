---
title: 基于华为OceanConnect平台的智慧路灯项目实战总结
tags: 华为物联网平台OceanConnect IoT
categories: IoT开发
abbrlink: 3630469501
date: 2019-07-21 10:48:56
---
这周参加了华为云举办的[7天玩转IoT物联网实战营]活动，短短的一周时间内对物联网项目的整个开发流程有了一个全新的认识，现作以总结，如下~

<!--more-->

# 1. 对课程的整体感受

对于这次课程，我觉得用“体验服”可以很好的概括这次课程内容，用一句话概述：

用“智慧路灯”这个完整的物联网项目，亲自动手体验**如何从0到1做一个物联网项目**。

# 2. 在课程中的收获 —— 一个物联网项目必需的内容

## 物联网平台

在一个物联网项目中，用于设备连接的服务器非常重要，可以选择自己基于本机搭建， 也可以选择基于云端ECS搭建，但是最好的选择是使用现有的物联网平台，可以大大方便我们开发过程。

物联网平台下可以负责设备管理，上可以负责对接应用，甚至我们都不需要写一行代码，是整个项目中的关键，所以选择一个好的物联网平台非常重要，目前主流的有：

- 华为云：[OceanConnect平台](https://iot-dev.huaweicloud.com)
- 阿里云：[阿里云物联网平台](https://iot.console.aliyun.com)
- 中国移动：[Onenet平台](https://open.iot.10086.cn)

## 通信模组 + TCP/IP协议栈 + 物联网操作系统

对于嵌入式设备来说，要想连接网络可没有PC上那么容易~

在嵌入式设备中具有非常多的限制：

- 是否支持连接网络的硬件设备（网卡）？
- 内存是否支持成功移植TCP/IP协议栈？
- 对于网络连接中的异常，是否可以避免堵塞，是否可以及时处理？
- ……

这些问题都限制了硬件是否可以成功连接网络。

### 通信模组

嵌入式设备要想连接网络，可以使用以下的通信模组：

- 以太网：常见的以太网卡模组有W5500，他们可以与MCU之间通过专有的ETH接口连接，进行通信，也可以通过SPI这些普通接口进行通信；
- WIFI：常见的有ESP8266，它内置了一个32位的MCU负责网路连接，与外部MCU之间基于UART接口使用AT指令通信；
- NB-iot：常见的有BC-95模组，它可以直接连接运营商的基站进行通信，但是带宽不高，与MCU之间也是用AT指令通信；
- 2G/4G（GPRS）：常见的有SIM868模组，它可以直接连接运营商的基站进行通信，使用GPRS连接，与MCU之间使用AT指令通信；

### 网络协议栈 —— Lwip

瑞典计算机科学院的Adam Dunkels开发了一个小型开源的TCP/IP协议栈，全称为Light Weight IP，也就是传说中的Lwip。

Lwip可以移植到裸机程序中，这样嵌入式设备就可以成功的连接网络，但是因为裸机程序中CPU只能执行一个任务，虽然它完成了连接网络的任务，但是对于网络中非常容易出现的异常，它还没有办法及时处理。

值得庆幸的是，Lwip还支持移植到操作系统中，如果将它移植到uc-OS，FreeRTOS这些嵌入式RTOS中，这些RTOS最大特性就是支持多任务运行，这样就可以分配一个线程去连接网络，另外的一些线程取做别的事情，有效的避免了堵塞。

### 物联网实时操作系统

在国内，一些实时操作系统已经**开发了自己的RTOS内核，并在此基础上移植了Lwip网络协议栈，甚至对接了物联网平台**，可以说非常方便，比较典型的有：

- RT-Thread：一款非常好的物联网操作系统，具有非常丰富的软件包，目前支持Onenet，Ali物联网平台；
- HUAWEI LiteOS：华为于2015年发布的轻量级操作系统；
- Ali AliOS：阿里发布的轻量级物联网操作系统；

毫无疑问，各个厂商推出的操作系统，肯定对自己的物联网平台支持性能最好。

## 应用开发

### 简单应用开发
对于一些简单的控制应用，可以直接在物联网平台上完成开发，不需要写一行代码就可以完成数据可视化的应用，非常方便。

### 复杂应用开发
如果想开发自己的应用，物联网平台也提供了应用API，并提供了SDK，SDK Demo等非常丰富的资源，可以基于这些API开发自己的微信小程序，APP等。

# 3. 在课程中的收获 —— 开发一个物联网项目的流程

基于物理网平台开发一个项目的流程有：

- 物联网平台开发：profile定义，编解码插件设计及测试；
- 物联网设备侧开发：对接平台
- 物理网应用侧开发：使用Ppostman调测API接口，APP开发，微信小程序开发；

另外，物联网平台还支持远程OTA升级，可以根据需要自行开发。






